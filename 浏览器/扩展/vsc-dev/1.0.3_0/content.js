(() => {(()=>{"use strict";const e="undefined"==typeof globalThis?{}:globalThis,n=e.cloneInto||(e=>e),{runtime:t}=(e.createObjectIn,e.exportFunction,chrome);(async()=>{const e=(({sendPrefix:e,listenPrefix:n,cloneInto:t})=>{let s,i,o=1;const r={},a=e=>{const n=++o;return r[o]=e,n},d=(e,n)=>{const{m:s,a:i,r:o}=n,r=new CustomEvent(e,{detail:(a={m:s,a:i,r:o},t?t(a,window.document):a)});var a;dispatchEvent.apply(window,[r])},l=n=>{const{m:t,r:o,a}=n.detail;if("message.response"==t){
if(null==o)throw"Invalid Message";((e,n)=>{let t;e&&(t=r[e])&&(t(n),delete r[e])})(o,a)}else s&&s({method:t,args:a},o?n=>{d(`${e}_${i}`,{m:"message.response",a:n,r:o})}:()=>{})},c=e=>{e&&(i=e),i&&addEventListener(`${n}_${i}`,l,!0)},u={init:async e=>{i?c():c(e),await function(){let e;return e=void 0,new Promise((e=>{const n=window.document.readyState;"interactive"==n||"complete"==n?e():window.addEventListener("DOMContentLoaded",(()=>{e()}),{capture:true,once:!0})}))}()},refresh:()=>{const e=i
;e&&(u.cleanup(),u.init(e))},send:(n,t,s)=>{d(`${e}_${i}`,{m:n,a:t,r:s?a(s):null})},setMessageListener:e=>{s=e},cleanup:()=>{i&&(removeEventListener(`${n}_${i}`,l,!0),i=void 0)}};return u})({sendPrefix:"2P",listenPrefix:"2C",cloneInto:n});e.init("LNlKJ"),e.setMessageListener(((e,n)=>{t.sendMessage({...e,method:"userscripts"},(e=>{n(e)}))}))})(window,"undefined"==typeof globalThis?window:globalThis)})();})()